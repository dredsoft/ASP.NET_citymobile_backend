function ReloadQuestionsGrid(n){$.ajax({type:"POST",url:objViolation.GetQuestionsUrl,dataType:"json",data:{violationId:n},success:function(t){var i="",r;if(t.length>0)for(r=0;r<t.length;r++)i=i+'<li class="p1 mb1 navy bg-yellow panel panel-default" style= "position: relative; z-index: 10" questionID= '+t[r].questionID+" order= "+t[r].order+" >"+t[r].question,t[r].enableEdit&&(i=i+'<br /><a href="javascript:void(0)" violationId="'+n+'" questionID="'+t[r].questionID+'" class="blue-link editQuestion">Edit<\/a>',i=i+' <a href="javascript:void(0)" violationId="'+n+'" questionID="'+t[r].questionID+'" class="blue-link DeleteQuestion">Delete<\/a>'),i=i+"<\/li >";$("#accordion").html("");$("#accordion").html(i)},cache:!0})}var violation={orderlist:[],AddQuestion:function(n){if($("#Question").val().trim()!==""){var r=$(n).attr("violationid"),u=$("#Question").val(),t=$("#txtChoiceQuestion").val(),i=$("#drpQuestionType").val();i!="TextField"?t.trim()!==""?violation.SaveQuestion(r,u,i,t):$(".alert").length>0||demo.showNotification("danger","Enter Choice"):violation.SaveQuestion(r,u,i,t)}else $(".alert").length>0||demo.showNotification("danger","Enter Question")},SaveQuestion:function(n,t,i,r){$.ajax({type:"POST",url:objViolation.SaveQuestionUrl,dataType:"json",async:!1,data:{violationId:n,questionId:$("#hdnQuestionId").val(),question:t,type:i,choices:r,isPublic:$("#chkIsPublic").is(":checked")},success:function(t){t.success===!0?($(".alert").length>0||demo.showNotification("success","Question saved successfully"),$("#btnAddQuestion").text("Add A QUESTION"),$("#btnCancelQuestion").hide(),$("#Question").val(""),$("#hdnQuestionId").val(""),$("#chkIsPublic").prop("checked",!1),$("#txtChoiceQuestion").tagsinput("removeAll"),$("#drpQuestionType").val("TextField"),$("#divChoice").hide(),ReloadQuestionsGrid(n)):$(".alert").length>0||demo.showNotification("danger",t.message)},cache:!0})},SaveOrder:function(){$.ajax({type:"POST",url:objViolation.SaveOrderUrl,dataType:"json",async:!1,data:{Orderlist:violation.orderlist},success:function(n){n.success===!0?violation.orderlist.length=0:demo.showNotification("danger",n.message)},cache:!0})}};$(document).ready(function(){sortable(".js-sortable",{forcePlaceholderSize:!0,placeholderClass:"p1 mb1 bg-navy border border-yellow"});$(".js-sortable").sortable({update:function(){$(".js-sortable li").each(function(n){var t=n,i;$(this).attr("order",t);i=$(this).attr("questionID");violation.orderlist.push({questionID:i,order:t})});violation.SaveOrder()}});$("#hrfQuestion").click(function(){$("#btntoggle").hide()});$(".violationTab").click(function(){$("#btntoggle").show()});$(document).on("click",".editQuestion",function(){var t=$(this).attr("violationId"),n=$(this).attr("questionID");$("#txtChoiceQuestion").tagsinput("removeAll");$.ajax({type:"POST",url:objViolation.EditQuestionUrl,dataType:"json",data:{questionID:n},success:function(n){n.comment!==""?($("#Question").val(n.question),$("#chkIsPublic").prop("checked",n.isRequired),$("#hdnQuestionId").val(n.questionID),$("#btnAddQuestion").text("UPDATE"),n.type!="TextField"&&($("#drpQuestionType").val(n.type),$("#txtChoiceQuestion").tagsinput("add",n.choices),$("#divChoice").show()),$("#btnCancelQuestion").show()):demo.showNotification("danger","You can't edit this comment")},cache:!0})});$(document).on("click",".DeleteQuestion",function(){var n=$(this).attr("violationId"),t=$(this).attr("questionID");$.ajax({type:"POST",url:objViolation.DeleteQuestionUrl,dataType:"json",data:{questionID:t},success:function(t){t==="1"?(demo.showNotification("success","Deleted successfully"),ReloadQuestionsGrid(n)):demo.showNotification("danger","You can't delete this comment")},cache:!0})});$("#btnCancelQuestion").click(function(){$("#btnAddQuestion").text("ADD COMMENT");$("#btnCancelQuestion").hide();$("#Question").val("");$("#hdnQuestionId").val("");$("#chkIsPublic").prop("checked",!1);$("#txtChoiceQuestion").tagsinput("removeAll");$("#drpQuestionType").val("TextField");$("#divChoice").hide()});$("#drpQuestionType").change(function(){$(this).val()=="TextField"?($("#divChoice").hide(),$("#txtChoiceQuestion").tagsinput("removeAll")):$("#divChoice").show()});$("#Question").on("focusout",function(){$(this).val()!=""&&$("#divQuestion").removeClass("is-empty")})});